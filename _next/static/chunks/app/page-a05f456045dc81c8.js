(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4255:(e,t,a)=>{Promise.resolve().then(a.bind(a,6625))},6625:(e,t,a)=>{"use strict";a.d(t,{default:()=>D});var n=a(5155),o=a(2115),r=a(8199),l=a(4598),i=a(760),c=a(4616),s=a(7210),d=a(4940),u=a(2650),x=a(4357),p=a(4126),b=a(1284),v=a(7434),g=a(3453);let h=[{iconName:"FlagIcon",color:"#2F72E2",label:"Set as first page"},{iconName:"PenLineIcon",color:"#9DA4B2",label:"Rename"},{iconName:"ClipboardIcon",color:"#9DA4B2",label:"Copy"},{iconName:"CopyIcon",color:"#9DA4B2",label:"Duplicate"},{iconName:"TrashIcon",color:"#EF494F",label:"Delete"}],m=[{id:"1",label:"Info",isActive:!0,iconName:"InfoIcon"},{id:"2",label:"Details",isActive:!1,iconName:"FileTextIcon"},{id:"3",label:"Other",isActive:!1,iconName:"FileTextIcon"},{id:"4",label:"Ending",isActive:!1,iconName:"CircleCheckIcon"}],f={gapVariants:{normal:{width:"20px"},expanded:{width:"56px",transition:{duration:.3}}},addButtonVariants:{hidden:{scale:0,opacity:0},visible:{scale:1,opacity:1,transition:{duration:.2}}}},w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,a=arguments.length>2?arguments[2]:void 0,o={size:t,...a&&{color:a}};switch(e){case"FlagIcon":return(0,n.jsx)(s.A,{...o});case"PenLineIcon":return(0,n.jsx)(d.A,{...o});case"ClipboardIcon":return(0,n.jsx)(u.A,{...o});case"CopyIcon":return(0,n.jsx)(x.A,{...o});case"TrashIcon":return(0,n.jsx)(p.A,{...o});case"InfoIcon":return(0,n.jsx)(b.A,{...o});case"FileTextIcon":return(0,n.jsx)(v.A,{...o});case"CircleCheckIcon":return(0,n.jsx)(g.A,{...o});default:return console.warn("[getIcon] Unknown icon name: ".concat(e,". Using FileTextIcon as fallback.")),(0,n.jsx)(v.A,{...o})}},N=()=>h.map(e=>({icon:w(e.iconName,16,e.color),label:e.label,color:e.color})),j=()=>m.map(e=>({id:e.id,label:e.label,isActive:e.isActive,icon:w(e.iconName,16)}));var C=a(627),y=a(4020);let A=()=>{let[e,t]=(0,o.useState)(!1),[a,n]=(0,o.useState)({top:0,left:0}),[r,l]=(0,o.useState)(!1),[i,c]=(0,o.useState)(!1),s=(0,o.useRef)(null),d=(0,o.useRef)(null),u=(0,o.useCallback)(()=>{if(d.current&&s.current){let e=d.current.getBoundingClientRect(),t=s.current.offsetWidth,a=s.current.offsetHeight,o=window.innerWidth,r=window.innerHeight,l=e.right-t+window.scrollX,i=e.top-a-8+window.scrollY;l<window.scrollX&&(l=window.scrollX),l+t>window.scrollX+o&&(l=window.scrollX+o-t),i<window.scrollY&&(i=window.scrollY),i+a>window.scrollY+r&&(i=window.scrollY+r-a),n({top:i,left:l}),c(!0)}},[]),x=(0,o.useCallback)(()=>{t(!1),l(!1),c(!1)},[]),p=(0,o.useCallback)((e,a,n)=>{e.stopPropagation(),e.preventDefault(),n(e,a),t(!0),c(!1)},[]);return(0,o.useEffect)(()=>{e&&s.current&&!i&&requestAnimationFrame(()=>{u()})},[e,i,u]),(0,o.useEffect)(()=>{let t=t=>{e&&s.current&&!s.current.contains(t.target)&&x()},a=()=>{e&&s.current&&i&&u()};return document.addEventListener("click",t),window.addEventListener("resize",a),()=>{document.removeEventListener("click",t),window.removeEventListener("resize",a)}},[e,x,u,i]),{showContextMenu:e,menuReady:i,isMenuHovered:r,contextMenuPosition:a,contextMenuRef:s,stepRef:d,setIsMenuHovered:l,handleContextMenuClick:p,closeContextMenu:x}};var k=a(7650);let I=(0,o.forwardRef)((e,t)=>{let{pageTitle:a,options:o,style:r,onMouseEnter:l,onMouseLeave:i,onFocus:c}=e,s=(0,n.jsxs)("div",{className:"fixed w-60 rounded-xl shadow-lg z-1000",style:r,ref:t,onMouseEnter:l,onMouseLeave:i,onFocus:c,children:[(0,n.jsx)("div",{className:"flex items-center justify-between h-10 bg-[var(--color-contextmenu-header-bg)] text-[var(--color-active-text)] text-[14px] px-3 py-2 border-[1px] border-[var(--color-border)] rounded-tl-lg rounded-tr-lg font-medium",children:a}),(0,n.jsxs)("div",{className:"flex flex-col bg-white rounded-br-lg rounded-bl-lg",children:[o.slice(0,o.length-1).map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center gap-x-1.5 px-3 pt-2 hover:bg-[var(--color-hover-bg)] text-sm\n                ".concat("Delete"===e.label?"text-[var(--color-contextmenu-delete)]":"text-[var(--color-active-text)]"," cursor-pointer\n                ").concat(t===o.length-1?"pb-0":"pb-2"),children:[e.icon,(0,n.jsx)("span",{children:e.label})]},t)),(0,n.jsx)("div",{className:"h-[1px] w-[90%] bg-[var(--color-contextmenu-divider)] mx-3"}),(0,n.jsxs)("div",{className:"flex items-center gap-x-1.5 px-3 pt-2 pb-2 hover:bg-[var(--color-hover-bg)]  text-[var(--color-contextmenu-delete)] cursor-pointer rounded-br-lg rounded-bl-lg bg-white",children:[o[o.length-1].icon,(0,n.jsx)("span",{children:o[o.length-1].label})]})]})]});return k.createPortal(s,document.body)});I.displayName="ContextMenu";let E=o.memo(I),F=o.memo(e=>{var t;let{item:a,isActive:r,onClick:l}=e,{showContextMenu:i,contextMenuPosition:c,isMenuHovered:s,contextMenuRef:d,stepRef:u,setIsMenuHovered:x,handleContextMenuClick:p,menuReady:b,closeContextMenu:v}=A(),g=(0,o.useMemo)(()=>N(),[]);return(0,n.jsxs)(C.N,{value:a,tabIndex:0,role:"button","aria-pressed":r,ref:u,onClick:l,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),l(e))},onDragStart:v,className:"flex gap-2 items-center py-1 px-2.5 h-8 cursor-pointer rounded-lg\n        outline-none focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2\n        focus-visible:shadow-[0_0_0_4px_rgba(47,114,226,0.3)] focus-visible:outline-[#2f72e2]\n        ".concat(r?"bg-white border-[1px] border-[var(--color-border)]":"bg-[var(--color-hover-bg)]"," \n        ").concat(!i&&!s&&!r?"hover:bg-[var(--color-hover-bg-opaque)] hover:text-[var(--color-inactive-text)]":"","\n        ").concat(!r&&"!focus:bg-[var(--color-hover-bg-opaque)] !focus:text-[var(--color-inactive-text)]"),whileHover:{scale:1.03,boxShadow:"0 2px 8px var(--color-hover-shadow)"},whileTap:{scale:.98},whileDrag:{scale:1.05,boxShadow:"0 2px 8px var(--color-drag-shadow)"},transition:{type:"spring",stiffness:400,damping:30},children:[(0,n.jsxs)("div",{className:"flex-1 flex items-center gap-1.5",children:[(0,n.jsx)("span",{className:"".concat(r?"text-[var(--color-active-icon)]":"text-[var(--color-inactive-icon)]"),children:null!=(t=null==a?void 0:a.icon)?t:w("FileTextIcon",16)}),(0,n.jsx)("span",{className:"text-[var(--color-inactive-text)] text-sm ".concat(r?"text-[var(--color-active-text)]":""),children:null==a?void 0:a.label})]}),r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y.A,{color:r?"var(--color-contextmenu-icon)":"var(--color-active-text)",size:16,onClick:e=>p(e,a.label,()=>{}),className:"ml-1 cursor-pointer"}),i&&(0,n.jsx)(E,{ref:d,pageTitle:a.label,options:g,style:{top:c.top,left:c.left,opacity:+!!b,pointerEvents:b?"auto":"none"},onMouseEnter:e=>{e.stopPropagation(),x(!0)},onMouseLeave:e=>{e.stopPropagation(),x(!1)},onFocus:e=>e.stopPropagation()})]})]})}),P={background:"linear-gradient(to right, #C0C0C0 50%, transparent 50%)",backgroundSize:"6px 1px",backgroundRepeat:"repeat-x"},D=()=>{let[e,t]=(0,o.useState)(j()),[a,s]=(0,o.useState)("Info"),[d,u]=(0,o.useState)(null),x=(0,o.useCallback)(a=>{if(e.length>=10)return;let n=[...e],o=n.filter(e=>e.label.startsWith("New Page")).map(e=>{let t=e.label.match(/^New Page (\d+)$/);return t?parseInt(t[1],10):0}),r=o.length>0?Math.max(...o)+1:1,l="New Page ".concat(r);n.splice(a+1,0,{id:"".concat(Date.now()),label:l,icon:w("FileTextIcon",16)}),t(n),s(l),u(null)},[e]);return(0,n.jsxs)("nav",{className:"flex items-center bg-white p-2 w-max flex-wrap rounded-lg",role:"tablist","aria-label":"Page navigation",children:[(0,n.jsx)(r.x,{axis:"x",values:e,onReorder:t,className:"flex items-center",children:e.map((t,r)=>(0,n.jsxs)(o.Fragment,{children:[(0,n.jsx)(l.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"flex",children:(0,n.jsx)(F,{item:t,isActive:t.label===a,onClick:()=>s(t.label)})}),r<e.length-1&&(0,n.jsxs)("div",{className:"flex items-center relative",onMouseEnter:()=>u(r),onMouseLeave:()=>u(null),children:[(0,n.jsx)(l.P.div,{className:"h-px bg-divider hover:cursor-pointer",style:P,initial:{opacity:0,scale:.95,...f.gapVariants.normal},animate:{opacity:1,scale:1,...d===r?f.gapVariants.expanded:f.gapVariants.normal},exit:{opacity:0,scale:.95,...f.gapVariants.normal},transition:{duration:.2}}),(0,n.jsx)(i.N,{children:d===r&&(0,n.jsx)(l.P.button,{variants:f.addButtonVariants,initial:"hidden",animate:"visible",exit:"hidden",onClick:()=>x(r),className:"absolute left-1/2 transform -translate-x-1/2 bg-white text-black rounded-full border border-border w-4 h-4 flex items-center justify-center",children:(0,n.jsx)(c.A,{size:8,className:"cursor-pointer"})})})]})]},t.id))}),(0,n.jsx)(l.P.div,{className:"h-px bg-[#C0C0C0] hover:cursor-pointer",style:{background:"linear-gradient(to right, #C0C0C0 50%, transparent 50%)",backgroundSize:"6px 1px",backgroundRepeat:"repeat-x"},variants:f.gapVariants,initial:"normal"}),(0,n.jsxs)(l.P.button,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},className:"flex items-center gap-1.5 h-8 text-sm bg-[#F9FAFB] text-[#1A1A1A] border-[1px] border-[#E1E1E1] hover:cursor-pointer hover:bg-[#9da4b259] px-3 py-1 rounded-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:()=>x(e.length-1),"aria-label":"Add new page",disabled:e.length>=10,children:[(0,n.jsx)(c.A,{size:16}),"Add page"]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[122,441,684,358],()=>t(4255)),_N_E=e.O()}]);